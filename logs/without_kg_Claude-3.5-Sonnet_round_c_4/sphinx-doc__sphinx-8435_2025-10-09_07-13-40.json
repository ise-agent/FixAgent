{
  "zero_patches": {
    "Location 1 (/root/hy/projects_4/sphinx/sphinx/ext/autodoc/__init__.py lines 1705-1705)": "\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n",
    "Location 2 (/root/hy/projects_4/sphinx/sphinx/ext/autodoc/__init__.py lines 2096-2096)": "\n    def add_directive_header(self, sig: str) -> None:\n        super().add_directive_header(sig)\n        sourcename = self.get_sourcename()\n        if not self.options.annotation:\n            # obtain type annotation for this attribute\n            try:\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n            except NameError:\n                # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                annotations = safe_getattr(self.parent, '__annotations__', {})\n            except TypeError:\n                annotations = {}\n            except KeyError:\n                # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n                annotations = {}\n            except AttributeError:\n                # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n"
  },
  "variant_patches": {
    "Location 1 (/root/hy/projects_4/sphinx/sphinx/ext/autodoc/__init__.py lines 1705-1705)": [
      "\n        try:\n            annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n        except NameError:\n            # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n            annotations = safe_getattr(self.parent, '__annotations__', {})\n        except TypeError:\n            annotations = {}\n        except KeyError:\n            # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n            annotations = {}\n        except AttributeError:\n            # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n",
      "\n            try:\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n",
      "\n            try:\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n",
      "\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n",
      "\n            try:\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n",
      "\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n",
      "\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n",
      "\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n"
    ],
    "Location 2 (/root/hy/projects_4/sphinx/sphinx/ext/autodoc/__init__.py lines 2096-2096)": [
      "\n    def add_directive_header(self, sig: str) -> None:\n        super().add_directive_header(sig)\n        sourcename = self.get_sourcename()\n        if not self.options.annotation:\n            # obtain type annotation for this attribute\n            try:\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n            except NameError:\n                # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                annotations = safe_getattr(self.parent, '__annotations__', {})\n            except TypeError:\n                annotations = {}\n            except KeyError:\n                # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n                annotations = {}\n            except AttributeError:\n                # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n",
      "\n    def add_directive_header(self, sig: str) -> None:\n        super().add_directive_header(sig)\n        sourcename = self.get_sourcename()\n        if not self.options.annotation:\n            # obtain type annotation for this attribute\n            try:\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n            except NameError:\n                # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                annotations = safe_getattr(self.parent, '__annotations__', {})\n            except TypeError:\n                annotations = {}\n            except KeyError:\n                # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n                annotations = {}\n            except AttributeError:\n                # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n",
      "\n    def add_directive_header(self, sig: str) -> None:\n        super().add_directive_header(sig)\n        sourcename = self.get_sourcename()\n        if not self.options.annotation:\n            # obtain type annotation for this attribute\n            try:\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n            except NameError:\n                # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                annotations = safe_getattr(self.parent, '__annotations__', {})\n            except TypeError:\n                annotations = {}\n            except KeyError:\n                # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n                annotations = {}\n            except AttributeError:\n                # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n",
      "\n    def add_directive_header(self, sig: str) -> None:\n        super().add_directive_header(sig)\n        sourcename = self.get_sourcename()\n        if not self.options.annotation:\n            # obtain type annotation for this attribute\n            try:\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n            except NameError:\n                # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                annotations = safe_getattr(self.parent, '__annotations__', {})\n            except TypeError:\n                annotations = {}\n            except KeyError:\n                # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n                annotations = {}\n            except AttributeError:\n                # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n",
      "\n    def add_directive_header(self, sig: str) -> None:\n        super().add_directive_header(sig)\n        sourcename = self.get_sourcename()\n        if not self.options.annotation:\n            # obtain type annotation for this attribute\n            try:\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n            except NameError:\n                # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                annotations = safe_getattr(self.parent, '__annotations__', {})\n            except TypeError:\n                annotations = {}\n            except KeyError:\n                # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n                annotations = {}\n            except AttributeError:\n                # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n",
      "\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n",
      "\n    def add_directive_header(self, sig: str) -> None:\n        super().add_directive_header(sig)\n        sourcename = self.get_sourcename()\n        if not self.options.annotation:\n            # obtain type annotation for this attribute\n            try:\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n            except NameError:\n                # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                annotations = safe_getattr(self.parent, '__annotations__', {})\n            except TypeError:\n                annotations = {}\n            except KeyError:\n                # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n                annotations = {}\n            except AttributeError:\n                # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n",
      "\n    def add_directive_header(self, sig: str) -> None:\n        super().add_directive_header(sig)\n        sourcename = self.get_sourcename()\n        if not self.options.annotation:\n            # obtain type annotation for this attribute\n            try:\n                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n            except NameError:\n                # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                annotations = safe_getattr(self.parent, '__annotations__', {})\n            except TypeError:\n                annotations = {}\n            except KeyError:\n                # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n                annotations = {}\n            except AttributeError:\n                # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n"
    ]
  },
  "combined_diffs": {
    "raw_patch": "diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py\nindex 171a3e7b0..9a8c7e06a 100644\n--- a/sphinx/ext/autodoc/__init__.py\n+++ b/sphinx/ext/autodoc/__init__.py\n@@ -1702,7 +1702,8 @@ class DataDocumenter(ModuleLevelDocumenter):\n         if not self.options.annotation:\n             # obtain annotation for this data\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n@@ -2093,7 +2094,8 @@ class AttributeDocumenter(DocstringStripSignatureMixin, ClassLevelDocumenter):\n         if not self.options.annotation:\n             # obtain type annotation for this attribute\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n",
    "variant_0": "diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py\nindex 171a3e7b0..0a34fa0b0 100644\n--- a/sphinx/ext/autodoc/__init__.py\n+++ b/sphinx/ext/autodoc/__init__.py\n@@ -1702,7 +1702,8 @@ class DataDocumenter(ModuleLevelDocumenter):\n         if not self.options.annotation:\n             # obtain annotation for this data\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n@@ -2093,7 +2094,24 @@ class AttributeDocumenter(DocstringStripSignatureMixin, ClassLevelDocumenter):\n         if not self.options.annotation:\n             # obtain type annotation for this attribute\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+    def add_directive_header(self, sig: str) -> None:\n+        super().add_directive_header(sig)\n+        sourcename = self.get_sourcename()\n+        if not self.options.annotation:\n+            # obtain type annotation for this attribute\n+            try:\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n+            except NameError:\n+                # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n+                annotations = safe_getattr(self.parent, '__annotations__', {})\n+            except TypeError:\n+                annotations = {}\n+            except KeyError:\n+                # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n+                annotations = {}\n+            except AttributeError:\n+                # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n",
    "variant_1": "diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py\nindex 171a3e7b0..5aad91b53 100644\n--- a/sphinx/ext/autodoc/__init__.py\n+++ b/sphinx/ext/autodoc/__init__.py\n@@ -1702,7 +1702,19 @@ class DataDocumenter(ModuleLevelDocumenter):\n         if not self.options.annotation:\n             # obtain annotation for this data\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+        try:\n+            annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n+        except NameError:\n+            # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n+            annotations = safe_getattr(self.parent, '__annotations__', {})\n+        except TypeError:\n+            annotations = {}\n+        except KeyError:\n+            # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n+            annotations = {}\n+        except AttributeError:\n+            # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n@@ -2093,7 +2105,24 @@ class AttributeDocumenter(DocstringStripSignatureMixin, ClassLevelDocumenter):\n         if not self.options.annotation:\n             # obtain type annotation for this attribute\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+    def add_directive_header(self, sig: str) -> None:\n+        super().add_directive_header(sig)\n+        sourcename = self.get_sourcename()\n+        if not self.options.annotation:\n+            # obtain type annotation for this attribute\n+            try:\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n+            except NameError:\n+                # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n+                annotations = safe_getattr(self.parent, '__annotations__', {})\n+            except TypeError:\n+                annotations = {}\n+            except KeyError:\n+                # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n+                annotations = {}\n+            except AttributeError:\n+                # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n",
    "variant_2": "diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py\nindex 171a3e7b0..3f49ebc1d 100644\n--- a/sphinx/ext/autodoc/__init__.py\n+++ b/sphinx/ext/autodoc/__init__.py\n@@ -1702,7 +1702,9 @@ class DataDocumenter(ModuleLevelDocumenter):\n         if not self.options.annotation:\n             # obtain annotation for this data\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+            try:\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n@@ -2093,7 +2095,24 @@ class AttributeDocumenter(DocstringStripSignatureMixin, ClassLevelDocumenter):\n         if not self.options.annotation:\n             # obtain type annotation for this attribute\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+    def add_directive_header(self, sig: str) -> None:\n+        super().add_directive_header(sig)\n+        sourcename = self.get_sourcename()\n+        if not self.options.annotation:\n+            # obtain type annotation for this attribute\n+            try:\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n+            except NameError:\n+                # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n+                annotations = safe_getattr(self.parent, '__annotations__', {})\n+            except TypeError:\n+                annotations = {}\n+            except KeyError:\n+                # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n+                annotations = {}\n+            except AttributeError:\n+                # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n",
    "variant_3": "diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py\nindex 171a3e7b0..3f49ebc1d 100644\n--- a/sphinx/ext/autodoc/__init__.py\n+++ b/sphinx/ext/autodoc/__init__.py\n@@ -1702,7 +1702,9 @@ class DataDocumenter(ModuleLevelDocumenter):\n         if not self.options.annotation:\n             # obtain annotation for this data\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+            try:\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n@@ -2093,7 +2095,24 @@ class AttributeDocumenter(DocstringStripSignatureMixin, ClassLevelDocumenter):\n         if not self.options.annotation:\n             # obtain type annotation for this attribute\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+    def add_directive_header(self, sig: str) -> None:\n+        super().add_directive_header(sig)\n+        sourcename = self.get_sourcename()\n+        if not self.options.annotation:\n+            # obtain type annotation for this attribute\n+            try:\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n+            except NameError:\n+                # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n+                annotations = safe_getattr(self.parent, '__annotations__', {})\n+            except TypeError:\n+                annotations = {}\n+            except KeyError:\n+                # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n+                annotations = {}\n+            except AttributeError:\n+                # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n",
    "variant_4": "diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py\nindex 171a3e7b0..0a34fa0b0 100644\n--- a/sphinx/ext/autodoc/__init__.py\n+++ b/sphinx/ext/autodoc/__init__.py\n@@ -1702,7 +1702,8 @@ class DataDocumenter(ModuleLevelDocumenter):\n         if not self.options.annotation:\n             # obtain annotation for this data\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n@@ -2093,7 +2094,24 @@ class AttributeDocumenter(DocstringStripSignatureMixin, ClassLevelDocumenter):\n         if not self.options.annotation:\n             # obtain type annotation for this attribute\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+    def add_directive_header(self, sig: str) -> None:\n+        super().add_directive_header(sig)\n+        sourcename = self.get_sourcename()\n+        if not self.options.annotation:\n+            # obtain type annotation for this attribute\n+            try:\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n+            except NameError:\n+                # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n+                annotations = safe_getattr(self.parent, '__annotations__', {})\n+            except TypeError:\n+                annotations = {}\n+            except KeyError:\n+                # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n+                annotations = {}\n+            except AttributeError:\n+                # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n",
    "variant_5": "diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py\nindex 171a3e7b0..3f49ebc1d 100644\n--- a/sphinx/ext/autodoc/__init__.py\n+++ b/sphinx/ext/autodoc/__init__.py\n@@ -1702,7 +1702,9 @@ class DataDocumenter(ModuleLevelDocumenter):\n         if not self.options.annotation:\n             # obtain annotation for this data\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+            try:\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n@@ -2093,7 +2095,24 @@ class AttributeDocumenter(DocstringStripSignatureMixin, ClassLevelDocumenter):\n         if not self.options.annotation:\n             # obtain type annotation for this attribute\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+    def add_directive_header(self, sig: str) -> None:\n+        super().add_directive_header(sig)\n+        sourcename = self.get_sourcename()\n+        if not self.options.annotation:\n+            # obtain type annotation for this attribute\n+            try:\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n+            except NameError:\n+                # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n+                annotations = safe_getattr(self.parent, '__annotations__', {})\n+            except TypeError:\n+                annotations = {}\n+            except KeyError:\n+                # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n+                annotations = {}\n+            except AttributeError:\n+                # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n",
    "variant_6": "diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py\nindex 171a3e7b0..9a8c7e06a 100644\n--- a/sphinx/ext/autodoc/__init__.py\n+++ b/sphinx/ext/autodoc/__init__.py\n@@ -1702,7 +1702,8 @@ class DataDocumenter(ModuleLevelDocumenter):\n         if not self.options.annotation:\n             # obtain annotation for this data\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n@@ -2093,7 +2094,8 @@ class AttributeDocumenter(DocstringStripSignatureMixin, ClassLevelDocumenter):\n         if not self.options.annotation:\n             # obtain type annotation for this attribute\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n",
    "variant_7": "diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py\nindex 171a3e7b0..0a34fa0b0 100644\n--- a/sphinx/ext/autodoc/__init__.py\n+++ b/sphinx/ext/autodoc/__init__.py\n@@ -1702,7 +1702,8 @@ class DataDocumenter(ModuleLevelDocumenter):\n         if not self.options.annotation:\n             # obtain annotation for this data\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n@@ -2093,7 +2094,24 @@ class AttributeDocumenter(DocstringStripSignatureMixin, ClassLevelDocumenter):\n         if not self.options.annotation:\n             # obtain type annotation for this attribute\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+    def add_directive_header(self, sig: str) -> None:\n+        super().add_directive_header(sig)\n+        sourcename = self.get_sourcename()\n+        if not self.options.annotation:\n+            # obtain type annotation for this attribute\n+            try:\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n+            except NameError:\n+                # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n+                annotations = safe_getattr(self.parent, '__annotations__', {})\n+            except TypeError:\n+                annotations = {}\n+            except KeyError:\n+                # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n+                annotations = {}\n+            except AttributeError:\n+                # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n",
    "variant_8": "diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py\nindex 171a3e7b0..0a34fa0b0 100644\n--- a/sphinx/ext/autodoc/__init__.py\n+++ b/sphinx/ext/autodoc/__init__.py\n@@ -1702,7 +1702,8 @@ class DataDocumenter(ModuleLevelDocumenter):\n         if not self.options.annotation:\n             # obtain annotation for this data\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n@@ -2093,7 +2094,24 @@ class AttributeDocumenter(DocstringStripSignatureMixin, ClassLevelDocumenter):\n         if not self.options.annotation:\n             # obtain type annotation for this attribute\n             try:\n-                annotations = get_type_hints(self.parent)\n+\n+    def add_directive_header(self, sig: str) -> None:\n+        super().add_directive_header(sig)\n+        sourcename = self.get_sourcename()\n+        if not self.options.annotation:\n+            # obtain type annotation for this attribute\n+            try:\n+                annotations = get_type_hints(self.parent, type_aliases=self.config.autodoc_type_aliases)\n+            except NameError:\n+                # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n+                annotations = safe_getattr(self.parent, '__annotations__', {})\n+            except TypeError:\n+                annotations = {}\n+            except KeyError:\n+                # a broken class found (refs: https://github.com/sphinx-doc/sphinx/issues/8084)\n+                annotations = {}\n+            except AttributeError:\n+                # AttributeError is raised on 3.5.2 (fixed by 3.5.3)\n             except NameError:\n                 # Failed to evaluate ForwardRef (maybe TYPE_CHECKING)\n                 annotations = safe_getattr(self.parent, '__annotations__', {})\n"
  }
}
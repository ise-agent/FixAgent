{
  "zero_patches": {
    "Location 1 (/root/hy/projects_3/scikit-learn/sklearn/calibration.py lines 763-763)": "\n        proba = np.zeros((_num_samples(X), n_classes))\n        for class_idx, this_pred, calibrator in zip(\n            pos_class_indices, predictions.T, self.calibrators\n        ):\n            if n_classes == 2:\n                # When binary, `predictions` consists only of predictions for\n                # clf.classes_[1] but `pos_class_indices` = 0\n                class_idx += 1\n            prediction = calibrator.predict(this_pred)\n            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n                prediction = prediction.values.ravel()\n            proba[:, class_idx] = prediction\n"
  },
  "variant_patches": {
    "Location 1 (/root/hy/projects_3/scikit-learn/sklearn/calibration.py lines 763-763)": [
      "\n        for class_idx, this_pred, calibrator in zip(\n            pos_class_indices, predictions.T, self.calibrators\n        ):\n            if n_classes == 2:\n                # When binary, `predictions` consists only of predictions for\n                # clf.classes_[1] but `pos_class_indices` = 0\n                class_idx += 1\n            prediction = calibrator.predict(this_pred)\n            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n                prediction = prediction.values.ravel()\n            proba[:, class_idx] = prediction\n",
      "\n        proba = np.zeros((_num_samples(X), n_classes))\n        for class_idx, this_pred, calibrator in zip(\n            pos_class_indices, predictions.T, self.calibrators\n        ):\n            if n_classes == 2:\n                # When binary, `predictions` consists only of predictions for\n                # clf.classes_[1] but `pos_class_indices` = 0\n                class_idx += 1\n            prediction = calibrator.predict(this_pred)\n            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n                prediction = prediction.values.ravel()\n            proba[:, class_idx] = prediction\n",
      "\n        proba = np.zeros((_num_samples(X), n_classes))\n        for class_idx, this_pred, calibrator in zip(\n            pos_class_indices, predictions.T, self.calibrators\n        ):\n            if n_classes == 2:\n                # When binary, `predictions` consists only of predictions for\n                # clf.classes_[1] but `pos_class_indices` = 0\n                class_idx += 1\n            prediction = calibrator.predict(this_pred)\n            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n                prediction = prediction.values.ravel()\n            proba[:, class_idx] = prediction\n",
      "\n        proba = np.zeros((_num_samples(X), n_classes))\n        for class_idx, this_pred, calibrator in zip(\n            pos_class_indices, predictions.T, self.calibrators\n        ):\n            if n_classes == 2:\n                # When binary, `predictions` consists only of predictions for\n                # clf.classes_[1] but `pos_class_indices` = 0\n                class_idx += 1\n            prediction = calibrator.predict(this_pred)\n            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n                prediction = prediction.values.ravel()\n            proba[:, class_idx] = prediction\n",
      "\n        proba = np.zeros((_num_samples(X), n_classes))\n        for class_idx, this_pred, calibrator in zip(\n            pos_class_indices, predictions.T, self.calibrators\n        ):\n            if n_classes == 2:\n                # When binary, `predictions` consists only of predictions for\n                # clf.classes_[1] but `pos_class_indices` = 0\n                class_idx += 1\n            prediction = calibrator.predict(this_pred)\n            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n                prediction = prediction.values.ravel()\n            proba[:, class_idx] = prediction\n",
      "\n        proba = np.zeros((_num_samples(X), n_classes))\n        for class_idx, this_pred, calibrator in zip(\n            pos_class_indices, predictions.T, self.calibrators\n        ):\n            if n_classes == 2:\n                # When binary, `predictions` consists only of predictions for\n                # clf.classes_[1] but `pos_class_indices` = 0\n                class_idx += 1\n            prediction = calibrator.predict(this_pred)\n            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n                prediction = prediction.values.ravel()\n            proba[:, class_idx] = prediction\n",
      "\n        proba = np.zeros((_num_samples(X), n_classes))\n        for class_idx, this_pred, calibrator in zip(\n            pos_class_indices, predictions.T, self.calibrators\n        ):\n            if n_classes == 2:\n                # When binary, `predictions` consists only of predictions for\n                # clf.classes_[1] but `pos_class_indices` = 0\n                class_idx += 1\n            prediction = calibrator.predict(this_pred)\n            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n                prediction = prediction.values.ravel()\n            proba[:, class_idx] = prediction\n",
      "\n        proba = np.zeros((_num_samples(X), n_classes))\n        for class_idx, this_pred, calibrator in zip(\n            pos_class_indices, predictions.T, self.calibrators\n        ):\n            if n_classes == 2:\n                # When binary, `predictions` consists only of predictions for\n                # clf.classes_[1] but `pos_class_indices` = 0\n                class_idx += 1\n            prediction = calibrator.predict(this_pred)\n            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n                prediction = prediction.values.ravel()\n            proba[:, class_idx] = prediction\n"
    ]
  },
  "combined_diffs": {
    "raw_patch": "diff --git a/sklearn/calibration.py b/sklearn/calibration.py\nindex 2c4a33616..4dca126c3 100644\n--- a/sklearn/calibration.py\n+++ b/sklearn/calibration.py\n@@ -760,7 +760,11 @@ class _CalibratedClassifier:\n                 # When binary, `predictions` consists only of predictions for\n                 # clf.classes_[1] but `pos_class_indices` = 0\n                 class_idx += 1\n-            proba[:, class_idx] = calibrator.predict(this_pred)\n+\n+            prediction = calibrator.predict(this_pred)\n+            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n+                prediction = prediction.values.ravel()\n+            proba[:, class_idx] = prediction\n \n         # Normalize the probabilities\n         if n_classes == 2:\n",
    "variant_0": "diff --git a/sklearn/calibration.py b/sklearn/calibration.py\nindex 2c4a33616..e76a96f11 100644\n--- a/sklearn/calibration.py\n+++ b/sklearn/calibration.py\n@@ -760,7 +760,19 @@ class _CalibratedClassifier:\n                 # When binary, `predictions` consists only of predictions for\n                 # clf.classes_[1] but `pos_class_indices` = 0\n                 class_idx += 1\n-            proba[:, class_idx] = calibrator.predict(this_pred)\n+\n+        proba = np.zeros((_num_samples(X), n_classes))\n+        for class_idx, this_pred, calibrator in zip(\n+            pos_class_indices, predictions.T, self.calibrators\n+        ):\n+            if n_classes == 2:\n+                # When binary, `predictions` consists only of predictions for\n+                # clf.classes_[1] but `pos_class_indices` = 0\n+                class_idx += 1\n+            prediction = calibrator.predict(this_pred)\n+            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n+                prediction = prediction.values.ravel()\n+            proba[:, class_idx] = prediction\n \n         # Normalize the probabilities\n         if n_classes == 2:\n",
    "variant_1": "diff --git a/sklearn/calibration.py b/sklearn/calibration.py\nindex 2c4a33616..8e37b0929 100644\n--- a/sklearn/calibration.py\n+++ b/sklearn/calibration.py\n@@ -760,7 +760,18 @@ class _CalibratedClassifier:\n                 # When binary, `predictions` consists only of predictions for\n                 # clf.classes_[1] but `pos_class_indices` = 0\n                 class_idx += 1\n-            proba[:, class_idx] = calibrator.predict(this_pred)\n+\n+        for class_idx, this_pred, calibrator in zip(\n+            pos_class_indices, predictions.T, self.calibrators\n+        ):\n+            if n_classes == 2:\n+                # When binary, `predictions` consists only of predictions for\n+                # clf.classes_[1] but `pos_class_indices` = 0\n+                class_idx += 1\n+            prediction = calibrator.predict(this_pred)\n+            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n+                prediction = prediction.values.ravel()\n+            proba[:, class_idx] = prediction\n \n         # Normalize the probabilities\n         if n_classes == 2:\n",
    "variant_2": "diff --git a/sklearn/calibration.py b/sklearn/calibration.py\nindex 2c4a33616..e76a96f11 100644\n--- a/sklearn/calibration.py\n+++ b/sklearn/calibration.py\n@@ -760,7 +760,19 @@ class _CalibratedClassifier:\n                 # When binary, `predictions` consists only of predictions for\n                 # clf.classes_[1] but `pos_class_indices` = 0\n                 class_idx += 1\n-            proba[:, class_idx] = calibrator.predict(this_pred)\n+\n+        proba = np.zeros((_num_samples(X), n_classes))\n+        for class_idx, this_pred, calibrator in zip(\n+            pos_class_indices, predictions.T, self.calibrators\n+        ):\n+            if n_classes == 2:\n+                # When binary, `predictions` consists only of predictions for\n+                # clf.classes_[1] but `pos_class_indices` = 0\n+                class_idx += 1\n+            prediction = calibrator.predict(this_pred)\n+            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n+                prediction = prediction.values.ravel()\n+            proba[:, class_idx] = prediction\n \n         # Normalize the probabilities\n         if n_classes == 2:\n",
    "variant_3": "diff --git a/sklearn/calibration.py b/sklearn/calibration.py\nindex 2c4a33616..e76a96f11 100644\n--- a/sklearn/calibration.py\n+++ b/sklearn/calibration.py\n@@ -760,7 +760,19 @@ class _CalibratedClassifier:\n                 # When binary, `predictions` consists only of predictions for\n                 # clf.classes_[1] but `pos_class_indices` = 0\n                 class_idx += 1\n-            proba[:, class_idx] = calibrator.predict(this_pred)\n+\n+        proba = np.zeros((_num_samples(X), n_classes))\n+        for class_idx, this_pred, calibrator in zip(\n+            pos_class_indices, predictions.T, self.calibrators\n+        ):\n+            if n_classes == 2:\n+                # When binary, `predictions` consists only of predictions for\n+                # clf.classes_[1] but `pos_class_indices` = 0\n+                class_idx += 1\n+            prediction = calibrator.predict(this_pred)\n+            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n+                prediction = prediction.values.ravel()\n+            proba[:, class_idx] = prediction\n \n         # Normalize the probabilities\n         if n_classes == 2:\n",
    "variant_4": "diff --git a/sklearn/calibration.py b/sklearn/calibration.py\nindex 2c4a33616..e76a96f11 100644\n--- a/sklearn/calibration.py\n+++ b/sklearn/calibration.py\n@@ -760,7 +760,19 @@ class _CalibratedClassifier:\n                 # When binary, `predictions` consists only of predictions for\n                 # clf.classes_[1] but `pos_class_indices` = 0\n                 class_idx += 1\n-            proba[:, class_idx] = calibrator.predict(this_pred)\n+\n+        proba = np.zeros((_num_samples(X), n_classes))\n+        for class_idx, this_pred, calibrator in zip(\n+            pos_class_indices, predictions.T, self.calibrators\n+        ):\n+            if n_classes == 2:\n+                # When binary, `predictions` consists only of predictions for\n+                # clf.classes_[1] but `pos_class_indices` = 0\n+                class_idx += 1\n+            prediction = calibrator.predict(this_pred)\n+            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n+                prediction = prediction.values.ravel()\n+            proba[:, class_idx] = prediction\n \n         # Normalize the probabilities\n         if n_classes == 2:\n",
    "variant_5": "diff --git a/sklearn/calibration.py b/sklearn/calibration.py\nindex 2c4a33616..e76a96f11 100644\n--- a/sklearn/calibration.py\n+++ b/sklearn/calibration.py\n@@ -760,7 +760,19 @@ class _CalibratedClassifier:\n                 # When binary, `predictions` consists only of predictions for\n                 # clf.classes_[1] but `pos_class_indices` = 0\n                 class_idx += 1\n-            proba[:, class_idx] = calibrator.predict(this_pred)\n+\n+        proba = np.zeros((_num_samples(X), n_classes))\n+        for class_idx, this_pred, calibrator in zip(\n+            pos_class_indices, predictions.T, self.calibrators\n+        ):\n+            if n_classes == 2:\n+                # When binary, `predictions` consists only of predictions for\n+                # clf.classes_[1] but `pos_class_indices` = 0\n+                class_idx += 1\n+            prediction = calibrator.predict(this_pred)\n+            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n+                prediction = prediction.values.ravel()\n+            proba[:, class_idx] = prediction\n \n         # Normalize the probabilities\n         if n_classes == 2:\n",
    "variant_6": "diff --git a/sklearn/calibration.py b/sklearn/calibration.py\nindex 2c4a33616..e76a96f11 100644\n--- a/sklearn/calibration.py\n+++ b/sklearn/calibration.py\n@@ -760,7 +760,19 @@ class _CalibratedClassifier:\n                 # When binary, `predictions` consists only of predictions for\n                 # clf.classes_[1] but `pos_class_indices` = 0\n                 class_idx += 1\n-            proba[:, class_idx] = calibrator.predict(this_pred)\n+\n+        proba = np.zeros((_num_samples(X), n_classes))\n+        for class_idx, this_pred, calibrator in zip(\n+            pos_class_indices, predictions.T, self.calibrators\n+        ):\n+            if n_classes == 2:\n+                # When binary, `predictions` consists only of predictions for\n+                # clf.classes_[1] but `pos_class_indices` = 0\n+                class_idx += 1\n+            prediction = calibrator.predict(this_pred)\n+            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n+                prediction = prediction.values.ravel()\n+            proba[:, class_idx] = prediction\n \n         # Normalize the probabilities\n         if n_classes == 2:\n",
    "variant_7": "diff --git a/sklearn/calibration.py b/sklearn/calibration.py\nindex 2c4a33616..e76a96f11 100644\n--- a/sklearn/calibration.py\n+++ b/sklearn/calibration.py\n@@ -760,7 +760,19 @@ class _CalibratedClassifier:\n                 # When binary, `predictions` consists only of predictions for\n                 # clf.classes_[1] but `pos_class_indices` = 0\n                 class_idx += 1\n-            proba[:, class_idx] = calibrator.predict(this_pred)\n+\n+        proba = np.zeros((_num_samples(X), n_classes))\n+        for class_idx, this_pred, calibrator in zip(\n+            pos_class_indices, predictions.T, self.calibrators\n+        ):\n+            if n_classes == 2:\n+                # When binary, `predictions` consists only of predictions for\n+                # clf.classes_[1] but `pos_class_indices` = 0\n+                class_idx += 1\n+            prediction = calibrator.predict(this_pred)\n+            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n+                prediction = prediction.values.ravel()\n+            proba[:, class_idx] = prediction\n \n         # Normalize the probabilities\n         if n_classes == 2:\n",
    "variant_8": "diff --git a/sklearn/calibration.py b/sklearn/calibration.py\nindex 2c4a33616..e76a96f11 100644\n--- a/sklearn/calibration.py\n+++ b/sklearn/calibration.py\n@@ -760,7 +760,19 @@ class _CalibratedClassifier:\n                 # When binary, `predictions` consists only of predictions for\n                 # clf.classes_[1] but `pos_class_indices` = 0\n                 class_idx += 1\n-            proba[:, class_idx] = calibrator.predict(this_pred)\n+\n+        proba = np.zeros((_num_samples(X), n_classes))\n+        for class_idx, this_pred, calibrator in zip(\n+            pos_class_indices, predictions.T, self.calibrators\n+        ):\n+            if n_classes == 2:\n+                # When binary, `predictions` consists only of predictions for\n+                # clf.classes_[1] but `pos_class_indices` = 0\n+                class_idx += 1\n+            prediction = calibrator.predict(this_pred)\n+            if hasattr(prediction, 'values'):  # pandas DataFrame/Series\n+                prediction = prediction.values.ravel()\n+            proba[:, class_idx] = prediction\n \n         # Normalize the probabilities\n         if n_classes == 2:\n"
  }
}